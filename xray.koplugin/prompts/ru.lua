return {
    -- System instruction
    system_instruction = "Ты эксперт по литературной критике. Твой ответ должен быть ТОЛЬКО в валидном JSON формате. Не используй Markdown, вступительные предложения или дополнительные пояснения. Отвечай ТОЛЬКО на русском языке.",
    
    -- Main prompt (Full book analysis)
    main = [[Книга: "%s" - Автор: %s
Создай детальные X-Ray данные для этой книги. Заполни JSON формат ниже ПОЛНОСТЬЮ.

ПРАВИЛА:
1. Не отклоняйся от JSON формата.
2. Поле "author_bio" ОБЯЗАТЕЛЬНО; напиши 2-3 предложения об авторе.
3. ПЕРСОНАЖИ: Перечисли минимум 15-20 персонажей (главные и второстепенные герои).
4. ИСТОРИЧЕСКИЕ ЛИЧНОСТИ: Найди РЕАЛЬНЫХ исторических личностей, упомянутых в книге или влиявших на эпоху. Если таких нет, не оставляй пустым; добавь правителя/лидера эпохи как "Историческую фигуру эпохи".
5. ДЕТАЛИ: Никогда не оставляй поля "importance_in_book" и "context_in_book" пустыми. Проанализируй контекст в книге.

ОБЯЗАТЕЛЬНЫЙ JSON ФОРМАТ:
{
  "book_title": "Название книги",
  "author": "Имя автора",
  "author_bio": "Подробная информация о жизни автора и его литературной личности (Обязательно)",
  "summary": "Полное содержание книги (Обзор без спойлеров)",
  "characters": [
    {
      "name": "Имя персонажа",
      "role": "Главный герой / Второстепенный персонаж / Антагонист",
      "gender": "Мужской / Женский / Неопределённый",
      "occupation": "Профессия или статус",
      "description": "Детальный анализ и черты характера персонажа"
    }
  ],
  "historical_figures": [
    {
      "name": "Имя исторической личности",
      "role": "Роль в реальной истории (напр., Император, Философ)",
      "biography": "Краткая биография",
      "importance_in_book": "Какова важность этого человека в книге? Почему он упоминается?",
      "context_in_book": "Как персонажи упоминают этого человека? В каком контексте он появляется?"
    }
  ],
  "locations": [
    {"name": "Название места", "description": "Описание места", "importance": "Значение в истории"}
  ],
  "themes": ["Тема 1", "Тема 2", "Тема 3", "Тема 4", "Тема 5"],
  "timeline": [
    {"event": "Название события", "chapter": "Соответствующая глава/часть", "importance": "Значение события"}
  ]
}]],

    -- Spoiler-free prompt (Based on reading progress)
    spoiler_free = [[Книга: "%s" - Автор: %s
КРИТИЧЕСКИ ВАЖНО: Читатель прочитал %d%% этой книги. Создай X-Ray данные ТОЛЬКО для содержания до этой точки чтения.

ПРАВИЛА ПРЕДОТВРАЩЕНИЯ СПОЙЛЕРОВ:
1. НЕ включай персонажей, которые появляются ПОСЛЕ этой точки чтения
2. НЕ упоминай события сюжета, которые происходят ПОСЛЕ этой точки
3. НЕ раскрывай развитие персонажей, которое происходит позже в книге
4. События хронологии должны охватывать ТОЛЬКО то, что читатель уже прочитал
5. Описания персонажей должны отражать их текущее состояние, а не более поздние изменения
6. Краткое содержание должно охватывать ТОЛЬКО события, которые читатель уже пережил

ДОПОЛНИТЕЛЬНЫЕ ПРАВИЛА:
1. Биография автора обязательна (она никогда не содержит спойлеров)
2. Исторические личности могут быть включены, если они упоминаются в уже прочитанной части
3. Локации должны быть только те, которые были посещены/упомянуты до сих пор
4. Темы должны отражать то, что очевидно в истории до этого момента

ОБЯЗАТЕЛЬНЫЙ JSON ФОРМАТ:
{
  "book_title": "Название книги",
  "author": "Имя автора",
  "author_bio": "Подробная информация о жизни автора и его литературной личности (Обязательно)",
  "summary": "Краткое содержание, охватывающее ТОЛЬКО то, что читатель прочитал до сих пор",
  "characters": [
    {
      "name": "Имя персонажа (только если уже представлен)",
      "role": "Главный герой / Второстепенный персонаж / Антагонист",
      "gender": "Мужской / Женский / Неопределённый",
      "occupation": "Профессия или статус",
      "description": "Состояние персонажа на текущий момент чтения - НЕ раскрывай более поздние события"
    }
  ],
  "historical_figures": [
    {
      "name": "Имя исторической личности",
      "role": "Роль в реальной истории",
      "biography": "Краткая биография",
      "importance_in_book": "Их значимость до текущей точки чтения",
      "context_in_book": "Как они упоминаются в уже прочитанной части"
    }
  ],
  "locations": [
    {"name": "Название места (только если уже посещено/упомянуто)", "description": "Описание", "importance": "Значение до этого момента"}
  ],
  "themes": ["Только темы, очевидные в истории до сих пор"],
  "timeline": [
    {"event": "Название события (ТОЛЬКО произошедшие события)", "chapter": "Соответствующая глава/часть", "importance": "Значение"}
  ]
}]],

    -- Fallback strings
    fallback = {
        unknown_book = "Неизвестная книга",
        unknown_author = "Неизвестный автор",
        unnamed_character = "Безымянный персонаж",
        not_specified = "Не указано",
        no_description = "Описание отсутствует",
        unnamed_person = "Безымянная личность",
        no_biography = "Биография недоступна"
    }
}

